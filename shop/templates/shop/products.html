{% extends 'blog/base.html' %}
{% load static %}

{% block title %}
    Products
{% endblock %}

{% block content %}
    {% include 'blog/nav_bar.html' %}
    <div class="main">
        <section class="module bg-dark-60 shop-page-header"
                 data-background="{% static 'assets/images/shop/product-page-bg.jpg' %}">
            <div class="container">
                <div class="row">
                    <div class="col-sm-6 col-sm-offset-3">
                        <h2 class="module-title font-alt">Shop Products</h2>
                        <div class="module-subtitle font-serif">A wonderful serenity has taken possession of my entire
                            soul, like these sweet mornings of spring which I enjoy with my whole heart.
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="module-small">
            <div class="container">
                <form class="row" method="post">
                    {% csrf_token %}
                    <div class="col-sm-4 mb-sm-20">
                        <select class="form-control" name="category_parent">
                            <option selected="selected" value="all">All</option>
                            {% for parent in categories_product_parent %}
                                <option value="{{ parent.slug }}">{{ parent.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-sm-2 mb-sm-20">
                        <select class="form-control" name="gender">
                            <option selected="selected" value="all">All</option>
                            <option value="F">Woman</option>
                            <option value="M">Man</option>
                        </select>
                    </div>
                    <div class="col-sm-3 mb-sm-20">
                        <select class="form-control" name="category_children">
                            <option selected="selected" value="all">All</option>
                            {% for children in categories_product_children %}
                                <option value="{{ children.slug }}">{{ children.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-sm-3">
                        <button class="btn btn-block btn-round btn-g" type="submit">Apply</button>
                    </div>
                </form>
            </div>
        </section>
        <hr class="divider-w">
        <section class="module-small">
            <div class="container">
                <div class="row multi-columns-row">
                    {% for product in products %}
                        <div class="col-sm-6 col-md-6 col-lg-6">
                            <div class="shop-item">
                                <div class="shop-item-image"><img src="{{ product.images.image_1.url }}"
                                                                  alt="{{ product.images.describe_image }}"/>
                                    <div class="shop-item-detail"><a class="btn btn-round btn-b"
                                                                     href="{% url 'add_checkout' product.slug %}"><span
                                            class="icon-basket">Add To Cart</span></a>
                                    </div>
                                </div>
                                <h4 class="shop-item-title font-alt"><a
                                        href="{% url 'product' product.slug %}">{{ product.name }}</a></h4>
                                Â£{{ product.price }}
                            </div>
                        </div>
                    {% endfor %}
                </div>

                {% if length > 4%}
                    <div class="row">
                        <div class="col-sm-12 align-center">
                                <div class="pagination font-alt">
                                    {% if products.has_previous %}
                                        <a href="{% url 'paginator_product' products.previous_page_number %}">
                                            <i class="fa fa-angle-left"></i></a>
                                    {% endif %}
                                    {% for page in products.paginator.page_range %}
                                        <a class="{% if page == products.number %}active{% endif %}"
                                           href="{% url 'paginator_product' page %}">{{ page }}</a>
                                    {% endfor %}
                                    {% if products.has_next %}
                                        <a href="{% url 'paginator_product' products.next_page_number %}">
                                            <i class="fa fa-angle-right"></i></a>
                                    {% endif %}
                                </div>
                        </div>
                    </div>
                {% endif %}
            </div>
        </section>
        {% include 'blog/footer.html' %}
    </div>
{% endblock %}
